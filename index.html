<!DOCTYPE html>
<html>
  <head>
    <title>Sprite</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
    <link rel="stylesheet" href="css/fork-me.css">
    <link rel="stylesheet" href="css/sprite.css">
  </head>
  <body>
    <h2>Sprite</h2>
    <h5>A very lightweight library to handle sprites on HTML Canvas</h5>
    <div class="sprite-demo inline" data-rows="4" data-columns="3"
         data-column-frequency="1" interval="150" data-row-index="1"
         no-adjust="true">
      <div style="display: none"><img src="img/pan.png"></div>
      <canvas width="36" height="36"></canvas>
    </div>
    <div class="sprite-demo inline" data-rows="4" data-columns="3"
         data-column-frequency="1" interval="150" data-row-index="0"
         no-adjust="true">
      <div style="display: none"><img src="img/pan.png"></div>
      <canvas width="36" height="36"></canvas>
    </div>
    <div class="sprite-demo inline" data-rows="4" data-columns="3"
         data-column-frequency="1" interval="150" data-row-index="2"
         no-adjust="true">
      <div style="display: none"><img src="img/pan.png"></div>
      <canvas width="36" height="36"></canvas>
    </div>
    <h4><a name="installation" href="#installation">Installation</a></h4>
    <p>
      You can easily get it from <a href="http://bower.io/">bower</a>
    </p>
    <pre><code>$ bower install sprite</code></pre>
    <p>
      Or get it from <a href="https://cdnjs.com/">cdnjs</a>
    </p>
    <pre style="max-width: 710px"><code class="html" style="text-align: center">&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/sprite-js/0.1.0/sprite.min.js&quot;&gt;&lt;/script&gt;</code></pre>

    <h4><a name="usage" href="#usage">Usage</a></h4>
    <p>
      Basically you can build a sprite by instantiating the Sprite class
    </p>
    <pre><code class="javascript">var sprite = new Sprite(options)</code></pre>

    <p>
      You should pass some arguments to Sprite, so that it can know:
    </p>
    <pre><code class="javascript">
  // (r) = required
  // (d N) = defaults to N
  var sprite = new Sprite({
    canvas: document.getElementById('canvas'), // Where to draw? (r)
    image: document.getElementById('image'),   // What image to use? (r)
    rows: 4,           // How many rows are there in the image?
    columns: 3,        // How many columns are there in the image?
    rowIndex: 0,       // Where to start drawing the row? (d 0)
    columnIndex: 0,    // Where to start drawing the column? (d 0)
    rowFrequency: 1,   // After how many draw cycles row is updated? (d 0)
    columnFrequency: 1,// After how many draw cycles column is updated? (d 0)
    rowCircular: true,    // true  -> 0, 1, 2, 0, 1, 2, 0, 1, 2... (d fls)
    columnCircular: true, // false -> 0, 1, 2, 1, 0, 1, 2, 1, 0... (d fls)
    rowDirection: 4,   // row increment (d 1)
    columnDirection: 4,// column increment (d 1)
    width: 100,        // Drawing width (d (image.width / columns))
    height: 100,       // Drawing height (d (image.height / rows))
  })
    </code></pre>

    <p>
      After that, you can draw your sprite
    </p>
    <pre><code class="javascript">
  // x, y are the coordinates where the sprite should be drawed on the canvas
  sprite.draw(x, y)
    </code></pre>

    <p>
      And you can also change the sprite properties dynamically
    </p>
    <pre><code class="javascript">
  sprite.rowFrequency = 20;
  sprite.rowIndex = 1;
  (...)
    </code></pre>

    <h4><a name="examples" href="#examples">Examples</a></h4>
    <p>
      All of the codes above use a chunk of code like this to render the code
      on loop:
    </p>
    <pre><code class="javascript">
  var canvas = sprite.canvas;
  function loop() {
    canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);
    sprite.draw(0, 0);
  }
  setInterval(loop, 200);
    </code></pre>

    <div class="sprite-demo" data-rows="4" data-columns="3"
         data-column-frequency="1" interval="150">
      <img src="img/pan.png">
      <canvas></canvas>
      <div class="source">
        Source:
        <a href="http://www.famitsu.com/freegame/tool/chibi/index1.html">
          ちびキャラツクール / ファミ通
        </a>
      </div>
    </div>

    <pre><code class="javascript">
  var sprite = new Sprite({
    canvas: document.getElementById('canvas'),
    image: document.getElementById('image'),
    <span></span>
  });
    </code></pre>

    <div class="sprite-demo" data-rows="5" data-columns="6"
      data-row-frequency="6" data-column-frequency="1" interval="25"
      data-row-circular="true" data-column-circular="true">
      <img src="img/runner.png">
      <canvas></canvas>
      <div class="source">
        Source:
        <a href="http://www.csc.villanova.edu/~tway/courses/csc8610/s2012/workshop1/matthew_sher/Sprite-Based%20Animation%20Matthew%20Sher.html">
          Sprite-Based Animation (Matthew Sher)
        </a>
      </div>
    </div>

    <pre><code class="javascript">
  var sprite = new Sprite({
    canvas: document.getElementById('canvas'),
    image: document.getElementById('image'),
    <span></span>
  });
    </code></pre>

    <div class="footer">
      (2015)
      <a href="https://github.com/nihey/sprites">
        Sprite
      </a>
      - a project by
      <a href="https://github.com/nihey">Nihey</a>
    </div>

    <!-- Fork On GitHub ribbon (http://codepo8.github.io/css-fork-on-github-ribbon/) -->
    <span id="forkongithub">
      <a href="https://github.com/nihey/sprites">
        Fork me on GitHub
      </a>
    </span>

    <!-- Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-61511592-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Scripts -->
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
    <script src="js/jquery.beautify.min.js"></script>
    <script src="js/sprite.min.js"></script>
    <script>
      function initSprite(options) {
        var sprite = new Sprite(options);

        var canvas = sprite.canvas;
        var maxDimension = Math.max(sprite.image.width, sprite.image.height) / 2;
        function loop() {
          canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);
          if (options.adjust) {
            sprite.draw(maxDimension - (sprite.width / 2),
                        maxDimension - (sprite.height / 2));
          }
          else {
            sprite.draw(0, 0);
          }
        }
        setInterval(loop, options.interval);
      }

      $(document).ready(function() {
        $('pre code').each(function(i, block) {
          (!$(block).find('span').length) && hljs.highlightBlock(block);
        });

        $('.sprite-demo').each(function(index, object) {
          var $canvas = $(object).find('canvas');
          var $image = $(object).find('img');
          var imageLoad = function() {
            if (!$image[0].complete) {
              return;
            }
            var maxDimension = Math.max($image.width(), $image.height());

            if (!$(object).attr('no-adjust')) {
              $canvas[0].width = maxDimension;
              $canvas[0].height = maxDimension;
            }

            var options = {
              canvas: $canvas[0],
              image: $image[0],
              rows: $(object).attr('data-rows'),
              columns: $(object).attr('data-columns'),
              rowIndex: $(object).attr('data-row-index'),
              rowFrequency: $(object).attr('data-row-frequency'),
              columnFrequency: $(object).attr('data-column-frequency'),
              rowCircular: $(object).attr('data-row-circular'),
              columnCircular: $(object).attr('data-column-circular'),
              interval: $(object).attr('interval'),
              adjust: !$(object).attr('no-adjust'),
            };
            initSprite(options);

            // Filter only attrs that matter on sprite creation
            var attrs = [];
            for(var key in options) {
              var spriteAttr = ['rows', 'columns', 'rowIndex', 'rowFrequency',
                                'columnFrequency', 'rowCircular',
                                'columnCircular'].indexOf(key) >= 0;
              if (options[key] && spriteAttr) {
                attrs.push(key + ': ' + options[key]);
              }
            }
            // Add code to the example
            $(object).next().find('code span').replaceWith(attrs.join(','));
            // Beautify it
            $(object).next().find('code').beautify({indent_size: 2});
            // And apply highlighting
            $(object).next().find('code').each(function(i, block) {
              hljs.highlightBlock(block);
            });
          };
          $image.one('load', imageLoad).each(imageLoad);
        });
      });
    </script>
  </body>
</html>
